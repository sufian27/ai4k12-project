{% extends "base.html" %}

{% block content %}
<!-- <div class="container"> -->
<h5 style="margin-bottom: 20px;">
    Welcome User {{g.user.id | safe}}!
</h5>
<form action="/intro?example" method="GET" name="form">
    <p>
        <label>
            <input name="example" type="radio" value='1' required/>
            <span>Let's learn about wine chemistry!</span>
        </label>
    </p>
    <p>
        <label>
            <input name="example" type="radio" value='2' />
            <span>Eco-system and what influence beetles richness?</span>
        </label>
    </p>
    <p>
        <label>
            <input name="example" type="radio" value='3' />
            <span>How to detect breast cancer from a cell?</span>
        </label>
    </p>
    <button type="submit" id="example-selection" class="btn btn-outline-success">Start your journey of scientific discovery!</button>
</form>  
<!-- </div> -->

{% endblock %}

{% block script %}
<!-- <script src="{{ url_for('static', filename = 'js/index.js') }}"></script> -->
<script type="text/javascript">
    // alert("inner js");
    localStorage.clear();
    $(document).ready(function(){
        $('input[type=radio]').click(function(){
            var data = {
                val: this.value
            };
            console.log(this.value);
            fetch(`${window.origin}/`, {
                method: "POST",
                credentials: "include",
                body: JSON.stringify(data),
                cache: "no-cache",
                headers: new Headers({
                    "content-type": "application/json"
                })
            })
            .then(function (response) {
                if (response.status !== 200) {
                    console.log(`Looks like there was a problem. Status code: ${response.status}`);
                    return;
                }
                response.json().then(function (data) {
                console.log(data);
                });
            })
            .catch(function (error) {
                console.log("Fetch error: " + error);
            });
        });
    });
    
</script>
{% endblock %}