{% extends "base.html" %}

{% block content %}
<div class="row" id="all_faces">
	<div><a class="btn">View all Faces</a></div>
	<div id="face_table" class="hidden"></div>
</div>
<div class="row">
	<div style="overflow:scroll; height:400px;" class="col-md-10 col-xs-10 col-sm-10 col-lg-10">
		<table id="data_table"></table>
	</div>
	<div id="face" class="col-md-2 col-xs-2 col-sm-2 col-lg-2"></div>
</div>
{% endblock %}

{% block script %}
<script>
	function readpara (para) {
		return para;
	}
	var getLocalData = localStorage.getItem('localDataset');
	var json_dataset = JSON.parse(getLocalData);
	getLocalData = localStorage.getItem('mappingRule');
	var json_mapping = JSON.parse(getLocalData);
	var variables = Object.keys(json_dataset[0]);
	var content = "<tr>" + '<td>' + "ID" +"</td>";
	
	for (i=0; i<variables.length; i++) {
		content += "<td>" + variables[i] + "</td>";
	}
	content += "</tr>";

	for (i=0; i<json_dataset.length; i++) {
		content += "<tr>";
		content += "<td class='data-id btn'>" + (i + 1) + "</td>";
        for (j = 0; j < variables.length; j++) {
        	content += '<td>' + json_dataset[i][variables[j]] + "</td>";
        }
        content += '</tr>';
	}

	document.getElementById("data_table").innerHTML = content;

    //default selection
    var data_id = 0;
    var datapoint = json_dataset[data_id];
    var example = readpara( {{ example }} );

</script>
<script src="{{ url_for('static', filename = 'js/face.js') }}"></script>
<script src="{{ url_for('static', filename = 'js/view_all_faces.js') }}"></script>
{% endblock %}